<!DOCTYPE html>
<html lang="pt_PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CALCULADORA</title>
    <link rel="stylesheet" href="componentes/stylesheet/bootstrap.min.css">
    <link rel="stylesheet" href="componentes/stylesheet/calculadora.css">
    <link rel="stylesheet" href="componentes/stylesheet/icons/bootstrap-icons.min.css">
</head>
<body>
    <div class="container card" id="container">
        <h1>CALCULADORA</h1>
        <div class="tela">
            <input type="text" id="tela" value="0" readonly>
        </div>
        <div class="btns">
            <input type="button" class="btn-cal" value="%">
            <input type="button" class="btn-cal" value="CE">
            <input type="button" class="btn-cal" value="C">
            <input type="button" class="btn-cal" value="⌫">
            <input type="button" class="btn-cal" value="1/x">
            <input type="button" class="btn-cal" value="x²">
            <input type="button" class="btn-cal" value="√">
            <input type="button" class="btn-cal operador" value="/">
            <input type="button" class="btn-cal nb" value="7">
            <input type="button" class="btn-cal nb" value="8">
            <input type="button" class="btn-cal nb" value="9">
            <input type="button" class="btn-cal operador" value="*">
            <input type="button" class="btn-cal nb" value="4">
            <input type="button" class="btn-cal nb" value="5">
            <input type="button" class="btn-cal nb" value="6">
            <input type="button" class="btn-cal operador" value="-">
            <input type="button" class="btn-cal nb" value="1">
            <input type="button" class="btn-cal nb" value="2">
            <input type="button" class="btn-cal nb" value="3">
            <input type="button" class="btn-cal operador" value="+">
            <input type="button" class="btn-cal" value="+/-">
            <input type="button" class="btn-cal nb" value="0">
            <input type="button" class="btn-cal" value=",">
            <input type="button" class="btn-cal operador" id="calcular" value="=">
        </div>
    </div>

    <script>
        const botao = document.querySelectorAll(".btn-cal");
        let valorBotao = "";
        let firstValor = "";
        let nextValor = "";
        const sinalOperador = document.querySelectorAll('.btn-cal.operador');
        let sinal = "";

        // Adicionar evento de clique de cada botão
        botao.forEach(botao => {
            botao.addEventListener("click", (event) => {
                const clicado = event.target; // Identifica o botão clicado 
                //alert(`Você clicou no: ${clicado.value}`);
                if (!([...sinalOperador].some(op => op.value === clicado.value))){
                    valorBotao += clicado.value;
                    document.getElementById("tela").value = valorBotao;
                }
                
                if ([...sinalOperador].some(op => op.value === clicado.value)) {
                    if (firstValor === "") {
                        firstValor += valorBotao; // Acumula os valores no firstValor
                        
                    }
                        valorBotao = ""; // Reseta o valor temporário
                        
                    } else if (firstValor !== "") {
                        nextValor = valorBotao;
                        // alert(nextValor);
                }


                /*if (clicado.value === "="){
                    alert("Os valores digitados sao: " + firstValor + " e " + nextValor);
                 
                }*/
            });
        });

        sinalOperador.forEach(operador => {
            operador.addEventListener("click", (event) => {
                const clicado = event.target;
                let v1 = parseFloat(firstValor) || 0;
                let v2 = parseFloat(nextValor) || 0;
                let result = 0;

                switch (clicado.value) {
                    case "+":  
                        document.getElementById("tela").value = clicado.value;
                        sinal = clicado.value;
                        result = (v1 + v2);
                    break;
                    case "-": 
                        document.getElementById("tela").value = clicado.value;
                        sinal = clicado.value;
                    break;
                    case "*":
                        document.getElementById("tela").value = clicado.value;
                        sinal = clicado.value;
                    break;
                    case "/":
                        document.getElementById("tela").value = clicado.value;
                        sinal = clicado.value; 
                    break;
                    case "=": 
                        switch (sinal) {
                            case "+":
                                result = v1 + v2;
                                break;
                            case "-":
                                result = v1 - v2;
                                break;
                            case "*":
                                result = v1 * v2;
                                break;
                            case "/":
                                result = v2 !== 0 ? v1 / v2 : "Erro: Divisão por zero"; // Tratamento para divisão por zero
                                break;
                            default:
                                //result = "Operação inválida";
                                document.getElementById("tela").value = "Error";
                        }
                        //alert("Os valores digitados são: " + firstValor + " " + sinal + " " + nextValor);
                        //alert("Resultado: " + result);
                        //document.getElementById("tela").value = firstValor + " " + sinal + " " + nextValor + " = " + result;
                        document.getElementById("tela").value = result;
                        firstValor = "";
                        nextValor = "";
                    break;
                }
            });
        });

        

    </script>

    <script>
         /* function verificarValor(valor) {
            if (!isNaN(valor) && valor !== '') { 
                // É um número
                const numero = Number(valor);
                if (Number.isInteger(numero)) {
                    console.log("O valor é um número inteiro:", numero);
                } else {
                    console.log("O valor é um número decimal:", numero);
                }
            } else {
                // Não é um número
                if (/^[a-zA-Z]$/.test(valor)) {
                    console.log("O valor é uma letra:", valor);
                } else {
                    console.log("O valor é um símbolo ou outro caractere:", valor);
                }
            }
        }*/
    </script>
</body>
</html>